
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>19. Design notes &#8212; CamCOPS 2.2.1 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/camcops_docs.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="20. Change log/history" href="../changelog.html" />
    <link rel="prev" title="18. Linux flavours" href="linux_flavours.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../changelog.html" title="20. Change log/history"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="linux_flavours.html" title="18. Linux flavours"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CamCOPS 2.2.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="design-notes">
<h1>19. Design notes<a class="headerlink" href="#design-notes" title="Permalink to this headline">¶</a></h1>
<p>A few design decisions are documented here. See also:</p>
<ul class="simple">
<li><a class="reference internal" href="../introduction/patient_identification.html#patient-identification"><span class="std std-ref">Patient/subject identification</span></a></li>
<li><a class="reference internal" href="../introduction/security_design.html#security-design"><span class="std std-ref">Security design</span></a></li>
</ul>
<div class="section" id="client-sqlcipher-databases">
<h2>19.1. Client SQLCipher databases<a class="headerlink" href="#client-sqlcipher-databases" title="Permalink to this headline">¶</a></h2>
<p>The CamCOPS client uses two databases (typically called <cite>camcops_data.sqlite</cite>
and <cite>camcops_sys.sqlite</cite>), stored in the device’s user-specific private area
(e.g. <cite>~/local/share/camcops under Linux</cite>). Note that some operating systems
(e.g. Android, iOS) are designed for single-user use and don’t have the concept
of a per-user private area. The ‘data’ database holds user data (patients,
patient data) and the ‘sys’ database contains configuration information, stored
strings, and the like. Both are encrypted with AES-256 via SQLCipher. They use
the same passphrase for user convenience, but different encryption keys
<a class="footnote-reference" href="#sqlcipher" id="id1">[1]</a>.</p>
<p>The decision to use two databases rather than one is so that, in emergencies,
the ‘data’ database can be processed (viewed, rescued) without the need to
share the ‘sys’ database and its information. It also simplifies the upload
process a little (as the client can simply upload everything from the ‘data’
database and nothing from the ‘sys’ database).</p>
</div>
<div class="section" id="inline-css">
<h2>19.2. Inline CSS<a class="headerlink" href="#inline-css" title="Permalink to this headline">¶</a></h2>
<p>The server currently provides CSS inline. It could refer to CSS as files, so
that browsers cache them better. However, inline CSS is still required for PDF
creation, and it’s not clear this is an important performance constraint.</p>
</div>
<div class="section" id="sftp-export">
<h2>19.3. SFTP export<a class="headerlink" href="#sftp-export" title="Permalink to this headline">¶</a></h2>
<p>Not necessary, as one can mount an SFTP directory via NFS, then just export as a
plain file.</p>
</div>
<div class="section" id="anonymisation">
<h2>19.4. Anonymisation<a class="headerlink" href="#anonymisation" title="Permalink to this headline">¶</a></h2>
<p>Proper anonymisation is Somebody Else’s Business; CamCOPS supports convenient
export for subsequent anonymisation (see, for example, CRATE;
<a class="reference external" href="https://github.com/RudolfCardinal/crate">https://github.com/RudolfCardinal/crate</a>).</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="sqlcipher" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>See <a class="reference external" href="https://www.zetetic.net/sqlcipher/design/">https://www.zetetic.net/sqlcipher/design/</a></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table Of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">2. Downloading CamCOPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/client_installation.html">3. Installing and configuring the client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/client_using.html">4. Using the client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/server_front_end_general.html">5. Web site: general use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tasks/tasks_by_category.html">6. Tasks in CamCOPS by category</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tasks/tasks_all.html">7. All tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/client_troubleshooting.html">8. Troubleshooting client problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/server_installation.html">9. Installing CamCOPS on the server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/server_configuration.html">10. Configuring the server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/server_config_file.html">11. The CamCOPS server configuration file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/server_front_end_admin.html">12. Web site: admin functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/server_command_line.html">13. CamCOPS server command-line tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/server_troubleshooting.html">14. Troubleshooting server problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/creating_tasks.html">15. Creating tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licences/licences.html">16. Licences</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcpip_ports.html">17. Common relevant TCP/IP ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_flavours.html">18. Linux flavours</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">19. Design notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#client-sqlcipher-databases">19.1. Client SQLCipher databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inline-css">19.2. Inline CSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sftp-export">19.3. SFTP export</a></li>
<li class="toctree-l2"><a class="reference internal" href="#anonymisation">19.4. Anonymisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">20. Change log/history</a></li>
<li class="toctree-l1"><a class="reference internal" href="known_problems.html">21. Known problems: client</a></li>
<li class="toctree-l1"><a class="reference internal" href="known_problems.html#known-problems-server">22. Known problems: server</a></li>
<li class="toctree-l1"><a class="reference internal" href="to_do.html">23. Things to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="wishlist.html">24. Wishlist and blue-sky thoughts</a></li>
<li class="toctree-l1"><a class="reference internal" href="local_info.html">25. Local configuration information</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="linux_flavours.html"
                        title="previous chapter">18. Linux flavours</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../changelog.html"
                        title="next chapter">20. Change log/history</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/misc/design_notes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../changelog.html" title="20. Change log/history"
             >next</a> |</li>
        <li class="right" >
          <a href="linux_flavours.html" title="18. Linux flavours"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CamCOPS 2.2.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2018, Rudolf Cardinal.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>